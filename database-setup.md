# Настройка базы данных в Supabase

## Шаги для создания схемы базы данных:

### 1. Откройте Supabase Dashboard

- Перейдите по ссылке: https://wtzkeiycwhmlsctzfugz.supabase.co
- Войдите в ваш аккаунт Supabase

### 2. Откройте SQL Editor

- В левой панели найдите и нажмите на "SQL Editor"
- Нажмите кнопку "New query" для создания нового запроса

### 3. Выполните SQL-скрипт

- Скопируйте весь содержимый файла `supabase-schema.sql`
- Вставьте его в SQL Editor
- Нажмите кнопку "Run" для выполнения скрипта

### 4. Проверьте создание таблиц

- Перейдите в раздел "Table Editor" в левой панели
- Вы должны увидеть две таблицы: `users` и `stands`
- В таблице `stands` должно быть 5 записей (стенды 1-5)
- В таблице `users` должна быть одна тестовая запись

### 5. Проверьте работу приложения

После выполнения SQL-скрипта:

```bash
curl http://localhost:3000/api/health
```

Вы должны увидеть:

```json
{
  "status": "OK",
  "db": "connected",
  "stands_count": 5,
  "message": "API сервер и Supabase работают"
}
```

### Тестовые данные для входа:

- **Email**: test@example.com
- **Пароль**: password123

## Что создается в базе данных:

### Таблица `users`

- `id` - уникальный идентификатор (UUID)
- `name` - имя пользователя
- `email` - email (уникальный)
- `password` - пароль
- `created_at` - дата создания

### Таблица `stands`

- `id` - уникальный идентификатор (UUID)
- `name` - название стенда
- `type` - тип стенда ('Обычный' или 'VIP')
- `status` - статус ('Свободен' или 'Занят')
- `occupied_by` - кем занят (email пользователя)
- `occupied_at` - время занятия
- `created_at` - дата создания

### Политики безопасности (RLS)

- Настроены базовые политики Row Level Security
- Все пользователи могут читать и изменять данные стендов
- Пользователи могут управлять своими данными
